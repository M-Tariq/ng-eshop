<div class="admin-page">
    <p-card [header]="isEditMode? 'Edit Product' : 'Add Product'"
        subheader="You can add or edit product here..."></p-card>

    <div class="p-grid">
        <p-toolbar>
            <div class="p-toolbar-group-left"></div>
            <div class="p-toolbar-group-right">
                <p-button (click)="onSubmit()" styleClass="p-button-primary" [label]="isEditMode? 'Update' : 'Create'"
                    icon="pi pi-plus" class="mr-2"></p-button>
                <p-button (click)="navigateToProductsListing()" styleClass="p-button-secondary" label="Cancel"
                    icon="pi pi-arrow-circle-left" class="mr-2"></p-button>
            </div>
        </p-toolbar>

        <form class="form" [formGroup]="form" id="form">
            <div class="card">
                <div class="formgrid grid">
                    <div class="field col">
                        <label for="name">Name</label>
                        <input formControlName="name" id="name" type="text" class="ng-invalid ng-dirty"
                            class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
                        <small *ngIf="productForm['name']?.touched && productForm['name']?.invalid"
                            class="p-error block" id="name">
                            Product Name is required
                        </small>
                    </div>

                    <div class="field col">
                        <label for="brand">Brand</label>
                        <input formControlName="brand" id="brand" type="text" class="ng-invalid ng-dirty"
                            class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full">
                        <small *ngIf="productForm['brand']?.touched && productForm['brand']?.invalid"
                            class="p-error block" id="name">
                            Brand is required
                        </small>
                    </div>

                    <div class="field col">
                        <label for="price">Price</label>
                        <br>
                        <p-inputNumber formControlName="price" inputId="price" [minFractionDigits]="2">
                        </p-inputNumber>

                        <small *ngIf="productForm['price']?.touched && productForm['price']?.invalid" class="p-error"
                            id="price">
                            Price is required
                        </small>
                    </div>

                </div>
            </div>
            <!-- row-2 -->
            <div class="card">
                <div class="formgrid grid">
                    <div class="field col">
                        <label for="stock">Stock</label>
                        <br>
                        <p-inputNumber inputId="integeronly" [min]="1" formControlName="countInStock">
                        </p-inputNumber>

                        <small *ngIf="productForm['countInStock']?.touched && productForm['countInStock']?.invalid"
                            class="p-error" id="description">
                            Count In Stock is required
                        </small>
                    </div>

                    <div class="field col">
                        <label for="category">Category</label>
                        <br>
                        <p-dropdown [options]="categories" [filter]="true" filterBy="name" [showClear]="true"
                            [autoDisplayFirst]="true" optionLabel="name" formControlName="category" optionValue="_id">
                        </p-dropdown>
                        <small *ngIf="productForm['category']?.touched && productForm['category']?.invalid"
                            class="p-error" id="category">
                            Category is required
                        </small>
                    </div>


                    <div class="field col">
                        <label for="featured">Featured</label>
                        <br>
                        <p-inputSwitch formControlName="isFeatured"></p-inputSwitch>
                        <small *ngIf="productForm['isFeatured']?.touched && productForm['isFeatured']?.invalid"
                            class="p-error" id="featured">
                            Category is required
                        </small>
                    </div>




                </div>

                <div class="p-field p-col-12">
                    <label for="description">Description</label>
                    <br>
                    <textarea formControlName="description" rows="7" [cols]="30" style="width: 100%; max-width: 100%;"
                        pInputTextarea id="description"></textarea>
                    <small *ngIf="productForm['description']?.touched && productForm['description']?.invalid"
                        class="p-error" id="description">
                        Product Description is required
                    </small>
                </div>

                <div class="p-field p-col-12">
                    <label for="description">Product Details</label>
                    <br>
                    <p-editor formControlName="richDescription" [style]="{'height':'320px'}">
                    </p-editor>
                    <small *ngIf="productForm['description']?.touched && productForm['description']?.invalid"
                        class="p-error" id="description">
                        Product Description is required
                    </small>
                </div>

                <div class="p-field p-col-12">
                    <label for="description">Product Main Image</label>
                    <br>
                    <input (change)="onImageUpload($event)" type="file" accept="image/*" class="p-inputtext" />
                    <small *ngIf="productForm['image']?.touched && productForm['image']?.invalid" class="p-error"
                        id="description">
                        Product Image is required
                    </small>
                    <div class="p-col-2 p-mt-5">
                        <img style="width: 100%;" [src]="imageDisplay" alt="">
                    </div>
                </div>
            </div>
        </form>
    </div>